<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.88.1">
<meta name=description content="Cisco IaC Lab">
<meta name=author content="Cisco Systems, Inc.">
<link rel=icon href=/iac-workshop-intersight/images/favicon.png type=image/png>
<title>State Management :: Infrastructure as Code Lab</title>
<link href=/iac-workshop-intersight/css/nucleus.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/fontawesome-all.min.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/hybrid.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/featherlight.min.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/perfect-scrollbar.min.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/auto-complete.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/atom-one-dark-reasonable.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/theme.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/tabs.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/hugo-theme.css?1633318973 rel=stylesheet>
<link href=/iac-workshop-intersight/css/theme-blue.css?1633318973 rel=stylesheet>
<script src=/iac-workshop-intersight/js/jquery-3.3.1.min.js?1633318973></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
<link href=/iac-workshop-intersight/css/custom.css rel=stylesheet>
<style>:not(div.featherlight-content)>img{cursor:zoom-in!important}:not(pre)>code.disable-clipboard+span.copy-to-clipboard{display:none}</style>
<div class="notices warning user-warning"><p>
This lab guide is currently <strong>NOT</strong> associated with a pod assignment. To avoid confusion and incomplete documentation please access this lab guide using the URL emailed to you.
</p></div>
</head>
<body data-url=/iac-workshop-intersight/terraform_primer/state_management/>
<nav id=sidebar class=showVisitedLinks>
<div id=header-wrapper>
<div id=header>
<a id=logo href=/><svg xmlns="http://www.w3.org/2000/svg" style="height:10%;width:100%" viewBox="0 0 651.27 318.7"><defs><style>.cls-1{fill:#fff}</style></defs><g id="Layer_2" data-name="Layer 2"><g id="Text"><path class="cls-1" d="M239.33 204.36l-7.39 10.43H221l-9.72-29.71h-8.79v-12.6h19.39l5.8 18.28 11.49-15 12.1 15 3.92-18.28h13.63L258.4 214.79H246.24z"/><path class="cls-1" d="M311.4 193.87a22.82 22.82.0 01-2.9 11.83 18.06 18.06.0 01-8.4 7.36A31.89 31.89.0 01287 215.52 31.5 31.5.0 01273.91 213a17.76 17.76.0 01-8.28-7.32 23.3 23.3.0 01-2.81-11.85 25 25 0 011.61-9.33 17.8 17.8.0 014.72-6.79 20.77 20.77.0 017.62-4.17A33.84 33.84.0 01287 172.16a31.44 31.44.0 0113.1 2.5 18.32 18.32.0 018.41 7.39A22.76 22.76.0 01311.4 193.87zm-33.55.11a13.39 13.39.0 001.83 7.09c1.22 2 3.63 3 7.22 3 2.78.0 4.85-.53 6.23-1.58a6.59 6.59.0 002.58-3.62 27.59 27.59.0 00.69-4.91 15.09 15.09.0 00-2-7.1q-1.79-3-7.53-3Q277.86 183.85 277.85 194z"/><path class="cls-1" d="M360.53 193.87a22.82 22.82.0 01-2.9 11.83 18 18 0 01-8.4 7.36 31.89 31.89.0 01-13.11 2.46A31.5 31.5.0 01323 213a17.69 17.69.0 01-8.27-7.32A23.2 23.2.0 01312 193.87a25 25 0 011.61-9.33 17.8 17.8.0 014.72-6.79 20.77 20.77.0 017.62-4.17 33.88 33.88.0 0110.22-1.42 31.44 31.44.0 0113.1 2.5 18.32 18.32.0 018.41 7.39A22.76 22.76.0 01360.53 193.87zM327 194a13.39 13.39.0 001.83 7.09c1.22 2 3.63 3 7.23 3q4.15.0 6.22-1.58a6.59 6.59.0 002.58-3.62 27.59 27.59.0 00.69-4.91 15 15 0 00-2-7.1q-1.79-3-7.52-3Q327 183.85 327 194z"/><path class="cls-1" d="M376.32 172.48v13.77L386 172.48h13.77L384 193.63l3.52 4.28a11.28 11.28.0 009.14 4.28h7v12.6H393.43q-6.45.0-11.78-6.3l-5.33-6.3v12.6H362.55V172.48z"/><path class="cls-1" d="M403.1 172.48h13.77v42.31H403.1z"/><path class="cls-1" d="M419.8 214.79V172.48h36.27v12.6h-22.5v2.75H443V196h-9.43v6.15h26.07v12.6z"/><path class="cls-1" d="M487.47 214.79V185.08h-8.79v-12.6h22.56v29.71h22.91v12.6z"/><path class="cls-1" d="M521.81 214.79l13.91-42.31h21l14.15 42.31h-16l-2.66-7.62H539.65L537 214.79zm24.46-32.93-6.06 16.75h11.66z"/><path class="cls-1" d="M570.29 214.79V172.48h28.86q6.95.06 10.56 2.4t4.38 7.85a9 9 0 01-1.78 6.63q-2.05 2.4-6.77 3.95v.12a13.69 13.69.0 014.28 1.24 12.65 12.65.0 013.29 2.26 9.58 9.58.0 012.07 2.94 7.87 7.87.0 01.73 3.23c0 3.34-.86 5.87-2.56 7.58a12.36 12.36.0 01-6.6 3.37 49.36 49.36.0 01-9.77.74zm14.59-32.06v6.42h10.26a2.69 2.69.0 001.78-.89 3.33 3.33.0 001-2.39 3 3 0 00-1.13-2.43 3.18 3.18.0 00-1.68-.71zm0 15.68v7.82h9.41a7.3 7.3.0 004.25-1 3.31 3.31.0 001.81-2.82 2.9 2.9.0 00-1.48-2.9 8.51 8.51.0 00-4.58-1.05z"/><path class="cls-1" d="M651.27 185.08H641q-7.53-.24-2.23 4.16 9.49 8.32 9.32 16.17t-9.32 9.38h-22.5v-12.6h8.91q8.29.23 2.11-4.63-10.2-9.37-8.67-17.23t9.6-7.85h23.09z"/></g><g id="Logo"><path d="M6.39 108.43c-.86-1.38-1.34-1-1.92.28a15.43 15.43.0 01-3.26 4.73 91 91 0 013-8.8c1.41-3.17 4.48-4.48 7.68-4.59 2.48-.09 3.56-1.39 4.73-3.12 1.87-2.79 4-5.37 7.58-6l7.75-8-1.29-1.21-4.45 5.4-1.79-.45 10.22-9a12 12 0 012.92-9.06l-.26 1.28.52.26c1.16-2.61 2.72-5.12 3.36-7.85s.17-5.77.56-8.61c.35-2.5 1.43-4.89 1.76-7.39.23-1.66-.48-3.43-.44-5.15a16 16 0 01.9-4.4c.36-1.1 1.18-2.06 1.6-3.15a91.86 91.86.0 004-14.68A22.14 22.14.0 0160.62 3.55 25.05 25.05.0 0177.27.38c2.87.42 6-.83 8.8-.2a16 16 0 017.15 4.18c3.65 3.54 7.38 7.2 8.32 12.6 4.3 1.62 2.87 5.12 2.87 8.27A6.54 6.54.0 00105.84 29c3.91 4.84 2 10 1.23 15.2a99.81 99.81.0 00-1.18 11.82c-.11 4.1 2.88 6.6 6 8.42s3.26 4.18 3.39 7.18l-7-9-1 .75c2.25 3.47 4.67 6.84 6.68 10.44 1 1.83 1.26 4.1 2 6.13a12.06 12.06.0 001.31 2.45c1.83 2.88 3.64 5.79 5.57 8.61a10.33 10.33.0 002.94 3.27c5.06 2.92 7.79 7.8 10.38 12.6 1.29 2.38 2.54 6.2 1.51 8.13-2.38 4.43-.94 8.79-.83 12.92.21 7.54 1.95 15 3 21.93l-1.76-2.6c-.08.46-.29.85-.17 1.08 1.95 3.89.73 8.07 1.15 12.09a31.43 31.43.0 001 3.19c.44 2 2.25 3.83.62 6.28-.47.7.27 2.7 1 3.63 1.52 1.82 3.86 3.05 5.08 5s1.7 4.7 2.49 7.08l-1.2.39L146 180.26c-.2 1.54-.33 2.53-.48 3.67l-3.94-8.46c-1.47 4.38-.77 8.36.38 13 1.08 4.38 4.68 5.92 6.08 9.37a12.23 12.23.0 011.35 3.18l-5.81-4.4 1.27 4.43-.83.28-2-4.55L141 197c.52 2.9 1.38 5.8 1.43 8.72.0 2 1.38 4.5-1.14 6.24a2.5 2.5.0 00-.63 2.37c2.35 4.31-.06 9 1.38 13.39-3.75 5 .19 10-.33 15-.19-.73-.42-1.45-.58-2.18a4.72 4.72.0 00-.84-2.2c-.7 9.17 1.4 18.11 2.14 27.21L140 254.36l-.92-.05c-.14 6.1.73 12.41-3.15 17.75l2.11-6.79c-3.91 2.22-3.45 5.51-3.1 8 .5 3.67-1.73 5.53-3.42 8 .28-4.47.55-8.73.83-13-1.86 3.92-.86 8.59-4.19 11.58v-11c-3.62 4.6-7.29 8.45-9.91 12.91-1.47 2.5-1.48 6-1.64 9.08a116.75 116.75.0 000 15.08c.21 2.83 1.55 5.58 2 8.61l-2.7-4c.46 3 .82 5.34 1.22 8H68.64V298.32c-2.07 1.68-2.29 3.72-1.52 6 .69 2 .77 3.62-1.67 4.44-.33.1-.59.79-.65 1.24-.4 2.86-.73 5.72-1.1 8.73H15.43c3.08-7.77 6.74-15.21 4.4-24.47l-2 4.35-.47-.14c.62-2 1.34-4.07 1.82-6.14a7.38 7.38.0 00.16-3.69 19.8 19.8.0 00-2.3-4l-2.69 2.68c.09-1.91.53-4.25.2-6.47A25.19 25.19.0 0012.3 274a67.83 67.83.0 00-3.89-6.39c-3 5.16-4.14 10.21-.7 15.66l-1.28.21c-.7-1.13-1.86-2.21-2-3.42a63.37 63.37.0 01.25-19.39A84 84 0 005.26 252l-2.09-.76a32 32 0 001.53-18.4c-.17-.83-.4-2 0-2.55 2.87-3.64-.53-7.41.94-11l-.9-.39-.8 1.4a4.23 4.23.0 01-.08-1c.68-3.75 1.52-7.49 2-11.27a23.23 23.23.0 00-.43-5v-9.77l-1.74 1.58c1.91-4.2 2.9-8.5.86-13.3l-2 4.92-.41-.1c.69-2.69.75-5.79 2.21-8 2.17-3.23.93-5.87-.07-8.74a31.88 31.88.0 00-1.83-3.68L.58 168.72l3-14.51-3 .79L0 154.33c5-3.12 3-8.14 3.76-12.38.43-2.47.08-5.06.08-8.22l-1.13 1.93-.74-.2C3 131 4 126.52 5.16 121.65l-2.59 1.61c4.17-4.24 5-9.32 3.74-14.93l1.42 2.86 5.08-9.74C8.34 102.54 6.56 104.52 6.39 108.43zM108.66 153l-5.3-2.87c-3 5.75-5.89 11.09-8.72 16.41 5 3.48 5.47 3.43 8-1.47C104.66 161.27 106.49 157.39 108.66 153zm-17.13 12.4c2.21-5.24 4.14-10.24 6.43-15.08 1.46-3.08.12-4-2.69-4.5L86.73 163zm29.14-51.86L113.61 130l4.09 1.26c2.7-5 5.36-10 8.12-15.13zM110.92 109l-6.87 16.48.64.87c1-.26 2.52-.21 2.9-.85 2.92-4.86 5.61-9.85 8.46-15zm-9 20.53c-.46 1.17-.76 2-1.11 2.81s-.76 1.85-1.21 2.75c-2.56 5.08-1.14 4.33 2.69 5.68l4.68-8.83zM79.54 181.15c-1.29 2.15-2.29 4-3.47 5.77-2.53 3.77-2.48 4 1.94 5.87l5.65-8.39zM91.2 189.6l-4.28-3.42c-1.25 2.36-2.11 4.33-3.28 6.09-2 3-1.09 4.68 2.54 5.68C87.79 195.28 89.43 192.53 91.2 189.6zm20.2-43.87 4.68-8.6-4.5-2.44c-1.64 3.09-3.09 5.84-4.6 8.7zM78.75 201.54l-6.15 9.4 3.72 1.86 6.47-9.66zM68.3 208l6.29-9.66-3.59-2-6 9.73zm25.85-25.63L98.66 175c-1.74-.77-4.34-2.32-4.64-2-1.54 1.87-2.5 4.22-3.77 6.6zM66.26 225.9c2.21-2.77 4.19-5.26 6.3-7.89l-3.4-2-5.63 8.19zm-4.12-14.29c-5.58 6.18-6.09 8-2.54 9.66l4.91-7.73zM85.07 169c-1 2.18-1.84 4.18-2.81 6.4l3.1 1.71 3.78-6.29zM56.65 225.51 53.85 224l-3.45 5L53 231.2C54.24 229.23 55.36 227.49 56.65 225.51zm2.4 9.63c1.38-1.86 2.64-3.54 4-5.38l-2.57-1.83c-1.31 1.9-2.5 3.62-3.79 5.47zm-11.32-1.75c-3.79 5-3.84 5.21-1.85 7.1l4.06-5.09zm7 4.07-1-.13a52.86 52.86.0 00-3.5 4 7.61 7.61.0 00-.71 2.57 7 7 0 002.45-.86 14.22 14.22.0 002.73-3.35C55 239.14 54.71 238.22 54.71 237.46zm-13.5 13.39a18.32 18.32.0 002.3-3.81c.1-.32-1.73-1.73-2-1.57A5.14 5.14.0 0039.51 248C39.34 248.55 40.34 249.45 41.23 250.85z"/><path class="cls-1" d="M108.66 153c-2.17 4.4-4 8.28-6 12.07-2.57 4.9-3 4.95-8 1.47 2.83-5.32 5.67-10.66 8.72-16.41z"/><path class="cls-1" d="M91.53 165.39 86.73 163l8.54-17.22c2.81.54 4.15 1.42 2.69 4.5C95.67 155.15 93.74 160.15 91.53 165.39z"/><path class="cls-1" d="M120.67 113.53l5.15 2.56c-2.76 5.14-5.42 10.11-8.12 15.13L113.61 130z"/><path class="cls-1" d="M110.92 109l5.13 1.54c-2.85 5.11-5.54 10.1-8.46 15-.38.64-1.9.59-2.9.85l-.64-.87z"/><path class="cls-1" d="M102 129.52l5.05 2.41-4.68 8.83c-3.83-1.35-5.25-.6-2.69-5.68.45-.9.83-1.82 1.21-2.75S101.5 130.69 102 129.52z"/><path class="cls-1" d="M79.54 181.15l4.12 3.25L78 192.79c-4.42-1.84-4.47-2.1-1.94-5.87C77.25 185.17 78.25 183.3 79.54 181.15z"/><path class="cls-1" d="M91.2 189.6c-1.77 2.93-3.41 5.68-5 8.35-3.63-1-4.52-2.69-2.54-5.68 1.17-1.76 2-3.73 3.28-6.09z"/><path class="cls-1" d="M111.4 145.73 107 143.39c1.51-2.86 3-5.61 4.6-8.7l4.5 2.44z"/><path class="cls-1" d="M78.75 201.54l4 1.6-6.47 9.66-3.72-1.86z"/><path class="cls-1" d="M68.3 208l-3.25-2 6-9.73 3.59 2z"/><path class="cls-1" d="M94.15 182.32l-3.9-2.72c1.27-2.38 2.23-4.73 3.77-6.6.3-.36 2.9 1.19 4.64 2z"/><path class="cls-1" d="M66.26 225.9l-2.73-1.72L69.16 216l3.4 2C70.45 220.64 68.47 223.13 66.26 225.9z"/><path class="cls-1" d="M62.14 211.61l2.37 1.93-4.91 7.73C56.05 219.66 56.56 217.79 62.14 211.61z"/><path class="cls-1" d="M85.07 169l4.07 1.82-3.78 6.29-3.1-1.71C83.23 173.21 84.11 171.21 85.07 169z"/><path class="cls-1" d="M56.65 225.51c-1.29 2-2.41 3.72-3.68 5.69L50.4 229l3.45-5z"/><path class="cls-1" d="M59.05 235.14l-2.34-1.74c1.29-1.85 2.48-3.57 3.79-5.47l2.57 1.83C61.69 231.6 60.43 233.28 59.05 235.14z"/><path class="cls-1" d="M47.73 233.39l2.21 2-4.06 5.09C43.89 238.6 43.94 238.39 47.73 233.39z"/><path class="cls-1" d="M54.71 237.46c0 .76.28 1.68-.05 2.24a14.22 14.22.0 01-2.73 3.35 7 7 0 01-2.45.86 7.61 7.61.0 01.71-2.57 52.86 52.86.0 013.5-4z"/><path class="cls-1" d="M41.23 250.85c-.89-1.4-1.89-2.3-1.72-2.85a5.14 5.14.0 012.07-2.53c.22-.16 2.05 1.25 2 1.57a18.32 18.32.0 01-2.35 3.81z"/></g><g id="Cisco_Logo" data-name="Cisco Logo"><g id="Layer_2-2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1-2"><path class="cls-1" d="M264.82 119.71a20.55 20.55.0 013-5 6.38 6.38.0 017.46-.91 6.69 6.69.0 014.13 6.3v15.44a7.13 7.13.0 01-5.91 7 7.26 7.26.0 01-8.29-5 16.67 16.67.0 01-.42-1.66z"/><path class="cls-1" d="M358.85 111.7v38.13A7.19 7.19.0 01345 152.56a10 10 0 01-.63-3.55V74.21a7.39 7.39.0 014.4-7.49 7.24 7.24.0 018.12 1.91 7.48 7.48.0 012 5.34C358.66 86.56 358.85 99.15 358.85 111.7z"/><path class="cls-1" d="M517.23 111.7v38a6.88 6.88.0 01-4.46 6.82 7.14 7.14.0 01-7.88-1.61 7.64 7.64.0 01-2.06-5.64V73.7a7.19 7.19.0 1114.37-.34v16.9z"/><path class="cls-1" d="M556.85 118.07v17.05a7 7 0 01-6.44 7.53 6.77 6.77.0 01-.78.0 7.12 7.12.0 01-7.32-6.93 5.76 5.76.0 010-.59V100.84a7.27 7.27.0 017-7.54h.37a7.16 7.16.0 017.16 7.15v.37C556.88 106.58 556.85 112.31 556.85 118.07z"/><path class="cls-1" d="M319.05 118.16V135a7.07 7.07.0 01-6.47 7.62h-.5a7.17 7.17.0 01-7.56-6.74q0-.39.0-.78V100.84a7.37 7.37.0 017.19-7.55H312a7.19 7.19.0 017.11 7.27c0 .11.0.23.0.34z"/><path class="cls-1" d="M398.28 118.16V135a7.25 7.25.0 01-14.5.0h0V100.72a7.34 7.34.0 017.12-7.55h.28a7.2 7.2.0 017.12 7.26c0 .16.0.32.0.47z"/><path class="cls-1" d="M477.59 118v17.77a7.18 7.18.0 01-13.62 3 10.41 10.41.0 01-.85-4V101.18a7.32 7.32.0 016.71-7.87 7.41 7.41.0 014.27 1 7.07 7.07.0 013.61 6.49V118z"/><path class="cls-1" d="M596.43 127.9v7.43a7.22 7.22.0 11-14.44.39V120.1a7.22 7.22.0 0114.44.52h0z"/><path class="cls-1" d="M437.92 128.08v7.43a7.22 7.22.0 11-14.44.21h0c-.18-5.15-.15-10.31.0-15.43a7.25 7.25.0 0114.47.15C438 123 437.92 125.53 437.92 128.08z"/></g></g></g></g></svg>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/iac-workshop-intersight/js/lunr.min.js?1633318973></script>
<script type=text/javascript src=/iac-workshop-intersight/js/auto-complete.js?1633318973></script>
<script type=text/javascript>var baseurl="https://wookie-labs.github.io/iac-workshop-intersight/"</script>
<script type=text/javascript src=/iac-workshop-intersight/js/search.js?1633318973></script>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/iac-workshop-intersight/terraform_primer/ title="Terraform Primer" class="dd-item
parent">
<a href=/iac-workshop-intersight/terraform_primer/>
<b>1. </b>Terraform Primer
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/iac-workshop-intersight/terraform_primer/infrastructure_as_code/ title="Infrastructure as Code" class=dd-item>
<a href=/iac-workshop-intersight/terraform_primer/infrastructure_as_code/>
Infrastructure as Code
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/terraform_primer/terraform_offerings/ title="Terraform Offerings" class=dd-item>
<a href=/iac-workshop-intersight/terraform_primer/terraform_offerings/>
Terraform Offerings
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/terraform_primer/ist/ title="Challenges with On-premise" class=dd-item>
<a href=/iac-workshop-intersight/terraform_primer/ist/>
Challenges with On-premise
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/terraform_primer/core_concepts/ title="Core Concepts" class=dd-item>
<a href=/iac-workshop-intersight/terraform_primer/core_concepts/>
Core Concepts
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/terraform_primer/configuration_files/ title="Configuration Blocks" class=dd-item>
<a href=/iac-workshop-intersight/terraform_primer/configuration_files/>
Configuration Blocks
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/terraform_primer/state_management/ title="State Management" class="dd-item active">
<a href=/iac-workshop-intersight/terraform_primer/state_management/>
State Management
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/terraform_primer/actions/ title=Actions class=dd-item>
<a href=/iac-workshop-intersight/terraform_primer/actions/>
Actions
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/iac-workshop-intersight/basics/ title="Getting started" class=dd-item>
<a href=/iac-workshop-intersight/basics/>
<b>2. </b>Getting started
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/iac-workshop-intersight/basics/verify_environment/ title="Verify connectivity" class=dd-item>
<a href=/iac-workshop-intersight/basics/verify_environment/>
Verify connectivity
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/basics/vscode/ title="Configure the IDE" class=dd-item>
<a href=/iac-workshop-intersight/basics/vscode/>
Configure the IDE
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/basics/api_keys/ title="Obtain API keys" class=dd-item>
<a href=/iac-workshop-intersight/basics/api_keys/>
Obtain API keys
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/basics/create_alias/ title="Create alias" class=dd-item>
<a href=/iac-workshop-intersight/basics/create_alias/>
Create alias
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/iac-workshop-intersight/open_source/ title="Terraform open source" class=dd-item>
<a href=/iac-workshop-intersight/open_source/>
<b>3. </b>Terraform open source
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/iac-workshop-intersight/open_source/first_plan/ title="Basic validation" class=dd-item>
<a href=/iac-workshop-intersight/open_source/first_plan/>
Basic validation
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/open_source/ntp_policy/ title="Create an Intersight policy" class=dd-item>
<a href=/iac-workshop-intersight/open_source/ntp_policy/>
Create an Intersight policy
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/open_source/destroy/ title="Destroy operations" class=dd-item>
<a href=/iac-workshop-intersight/open_source/destroy/>
Destroy operations
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/open_source/variables/ title="Employ variables" class=dd-item>
<a href=/iac-workshop-intersight/open_source/variables/>
Employ variables
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/open_source/second_policy/ title="Create another policy" class=dd-item>
<a href=/iac-workshop-intersight/open_source/second_policy/>
Create another policy
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/iac-workshop-intersight/remote_cli/ title="Terraform remote CLI" class=dd-item>
<a href=/iac-workshop-intersight/remote_cli/>
<b>4. </b>Terraform remote CLI
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/iac-workshop-intersight/remote_cli/specify_remote/ title="Change backend" class=dd-item>
<a href=/iac-workshop-intersight/remote_cli/specify_remote/>
Change backend
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/remote_cli/configure_tfcloud/ title="Move variables to the cloud" class=dd-item>
<a href=/iac-workshop-intersight/remote_cli/configure_tfcloud/>
Move variables to the cloud
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/iac-workshop-intersight/tf_cloud/ title="GitHub + Terraform Cloud" class=dd-item>
<a href=/iac-workshop-intersight/tf_cloud/>
<b>5. </b>GitHub + Terraform Cloud
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/iac-workshop-intersight/tf_cloud/github_repo/ title="Migrate to VCS" class=dd-item>
<a href=/iac-workshop-intersight/tf_cloud/github_repo/>
Migrate to VCS
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/tf_cloud/push_changes/ title="Push changes to GitHub" class=dd-item>
<a href=/iac-workshop-intersight/tf_cloud/push_changes/>
Push changes to GitHub
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/tf_cloud/rollback/ title=Rollback class=dd-item>
<a href=/iac-workshop-intersight/tf_cloud/rollback/>
Rollback
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/tf_cloud/modules/ title="Use Community Modules" class=dd-item>
<a href=/iac-workshop-intersight/tf_cloud/modules/>
Use Community Modules
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/iac-workshop-intersight/resources/ title=Resources class=dd-item>
<a href=/iac-workshop-intersight/resources/>
Resources
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/iac-workshop-intersight/resources/guacamole/ title=Guacamole class=dd-item>
<a href=/iac-workshop-intersight/resources/guacamole/>
Guacamole
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/iac-workshop-intersight/resources/tf_background/ title="Terraform background" class=dd-item>
<a href=/iac-workshop-intersight/resources/tf_background/>
Terraform background
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
</ul>
<section id=prefooter>
<hr>
<ul>
<li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li>
</ul>
</section>
<section id=footer>
<p>Created by <strong>Doron Chosnek</strong> and <strong>Brandon Beck</strong></p>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<a href=/iac-workshop-intersight/>IaC Fundamentals with Intersight</a> > <a href=/iac-workshop-intersight/terraform_primer/>Terraform Primer</a> > State Management
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#purpose-of-terraform-state>Purpose of Terraform State</a>
<ul>
<li><a href=#resource-mapping>Resource Mapping</a></li>
<li><a href=#metadata>Metadata</a></li>
<li><a href=#performance>Performance</a></li>
<li><a href=#syncing>Syncing</a></li>
</ul>
</li>
<li><a href=#format>Format</a>
<ul>
<li><a href=#resources-in-state>Resources in State</a></li>
<li><a href=#outputs-in-state>Outputs in State</a></li>
<li><a href=#execution-order>Execution Order</a></li>
</ul>
</li>
<li><a href=#moving-forward>Moving Forward</a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
State Management
</h1>
<p>As mentioned previously, Terraform&rsquo;s ability to store any infrastructure&rsquo;s configuration into a consistent state format is a key differentiator to how this IaC toolset works. Because state is so important it merits it&rsquo;s own section to explain further.</p>
<h2 id=purpose-of-terraform-state>Purpose of Terraform State</h2>
<p>Terraform uses <strong>state</strong> to document the expected configuration of managed infrastructure. You may wonder if Terraform could work without state by simply re-inspecting the managed resources prior to applying any configuration changes. While it might seem possible in some cases, the reality is your simply shifting the complexity from one place (state) to another (the replacement logic). The following subsections help further explain the value of state.</p>
<h3 id=resource-mapping>Resource Mapping</h3>
<p>Terraform requires some sort of database to map Terraform config to the real world. When you have a resource
<code class=disable-clipboard>&ldquo;intersight_ntp_policy&rdquo;</code>
<code class=disable-clipboard>&ldquo;east&rdquo;</code> in your configuration, Terraform uses this map to know that Intersight uniquely identifies this resource via Managed Object ID (<strong>Moid</strong>)
<code class=disable-clipboard>6138396d6972652d3029a3a8</code>.</p>
<p>Terraform expects that each remote object is bound to only one resource instance, which is normally guaranteed by Terraform being responsible for creating the objects and recording their identities in the state. If you instead import objects that were created outside of Terraform, you&rsquo;ll need to check yourself that each distinct object is imported to only one resource instance.</p>
<h3 id=metadata>Metadata</h3>
<p>Alongside the mappings between resources and remote objects, Terraform must also track metadata such as resource dependencies.</p>
<p>Terraform typically uses the configuration to determine dependency order. However, when you delete a resource from a Terraform configuration, Terraform must know how to delete that resource. Terraform can see that a mapping exists for a resource not in your configuration and plan to destroy. However, since the configuration no longer exists, the order cannot be determined from the configuration alone.</p>
<p>To ensure correct operation, Terraform retains a copy of the most recent set of dependencies within the state. Now Terraform can still determine the correct order for destruction from the state when you delete one or more items from the configuration.</p>
<h3 id=performance>Performance</h3>
<p>In addition to basic mapping, Terraform stores a cache of the attribute values for all resources in the state. This is the most optional feature of Terraform state and is done only as a performance improvement.</p>
<p>When running a
<code class=disable-clipboard>terraform plan</code>, Terraform must know the current state of resources in order to effectively determine the changes that it needs to make to reach your desired configuration.</p>
<p>For small infrastructures, Terraform can query your providers and sync the latest attributes from all your resources. This is the default behavior of Terraform: for every plan and apply, Terraform will sync all resources in your state.</p>
<p>For larger infrastructures, querying every resource is too slow. Many cloud providers do not provide APIs to query multiple resources at once, and the round trip time for each resource is hundreds of milliseconds. On top of this, cloud providers almost always have API rate limiting so Terraform can only request a certain number of resources in a period of time. Larger users of Terraform make heavy use of the
<code class=disable-clipboard>-refresh=false</code> flag as well as the
<code class=disable-clipboard>-target</code> flag in order to work around this. In these scenarios, the cached state is treated as the record of truth.</p>
<h3 id=syncing>Syncing</h3>
<p>In the default configuration, Terraform stores the state in a file in the current working directory where Terraform was run. This is okay for getting started, but when using Terraform in a team it is important for everyone to be working with the same state so that operations will be applied to the same remote objects.</p>
<p>
<a href=https://www.terraform.io/docs/language/state/remote.html target=_blank>Remote state</a> is the recommended solution to this problem. With a fully-featured state backend, Terraform can use remote locking as a measure to avoid two or more different users accidentally running Terraform at the same time, and thus ensure that each Terraform run begins with the most recent updated state.</p>
<h2 id=format>Format</h2>
<p>Now that you understand the value of state, let&rsquo;s review what an actual state file looks like. State snapshots are stored in JSON format and new Terraform versions are generally backward compatible with state snapshots produced by earlier versions. While the format of the state files are just JSON, direct file editing of the state is discouraged. Terraform provides the
<a href=https://www.terraform.io/docs/cli/commands/state/index.html target=_blank>terraform state</a> command to perform basic modifications of the state using the CLI.</p>
<p>Revisiting the previous configuration example, let&rsquo;s say we
<code class=disable-clipboard>apply</code> the following configuration (Terraform actions such as
<code class=disable-clipboard>plan</code>,
<code class=disable-clipboard>apply</code> and
<code class=disable-clipboard>destroy</code> will be covered in the next section)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=color:#66d9ef>output</span> <span style=color:#e6db74>&#34;ntp_east_moid&#34;</span> {
    <span style=color:#a6e22e>value</span> = <span style=color:#a6e22e>intersight_ntp_policy</span>.<span style=color:#a6e22e>east</span>.<span style=color:#a6e22e>moid</span>
}
<span style=color:#66d9ef>
</span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;intersight_ntp_policy&#34;</span> <span style=color:#e6db74>&#34;east&#34;</span> {
  <span style=color:#a6e22e>name</span>        = <span style=color:#e6db74>&#34;east_coast&#34;</span>
  <span style=color:#a6e22e>description</span> = <span style=color:#e6db74>&#34;IaC lab NTP policy for east coast&#34;</span>
  <span style=color:#a6e22e>enabled</span>     = <span style=color:#66d9ef>true</span>
  <span style=color:#a6e22e>ntp_servers</span> = [
    <span style=color:#e6db74>&#34;ntp.esl.cisco.com&#34;</span>,
    <span style=color:#e6db74>&#34;time-a-g.nist.gov&#34;</span>,
    <span style=color:#e6db74>&#34;time-b-g.nist.gov&#34;</span>
  ]
  <span style=color:#a6e22e>organization</span> {
    <span style=color:#a6e22e>object_type</span> = <span style=color:#e6db74>&#34;organization.Organization&#34;</span>
    <span style=color:#a6e22e>moid</span>        = data.<span style=color:#a6e22e>intersight_organization_organization</span>.<span style=color:#a6e22e>iac</span>.<span style=color:#a6e22e>results</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>moid</span>
  }
}
<span style=color:#66d9ef>
</span><span style=color:#66d9ef>data</span> <span style=color:#e6db74>&#34;intersight_organization_organization&#34;</span> <span style=color:#e6db74>&#34;iac&#34;</span> {
    <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;IaC_User_{{pod}}&#34;</span>
}
</code></pre></div><p>Assuming our provider authentication has been configured properly (you will go through this in the lab) your state file should resemble the following:</p>
<div class="notices note"><p>Some of the output below has been removed for readability reasons</p>
</div>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#ae81ff>4</span>,
  <span style=color:#f92672>&#34;terraform_version&#34;</span>: <span style=color:#e6db74>&#34;1.0.6&#34;</span>,
  <span style=color:#f92672>&#34;serial&#34;</span>: <span style=color:#ae81ff>2</span>,
  <span style=color:#f92672>&#34;lineage&#34;</span>: <span style=color:#e6db74>&#34;e98beb19-8d41-e8d1-36b2-26aedcb09c90&#34;</span>,
  <span style=color:#f92672>&#34;outputs&#34;</span>: {
    <span style=color:#f92672>&#34;ntp_east_moid&#34;</span>: {
      <span style=color:#f92672>&#34;value&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
    }
  },
  <span style=color:#f92672>&#34;resources&#34;</span>: [
    {
      <span style=color:#f92672>&#34;mode&#34;</span>: <span style=color:#e6db74>&#34;data&#34;</span>,
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;intersight_organization_organization&#34;</span>,
      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;iac&#34;</span>,
      <span style=color:#f92672>&#34;provider&#34;</span>: <span style=color:#e6db74>&#34;provider[\&#34;registry.terraform.io/ciscodevnet/intersight\&#34;]&#34;</span>,
      <span style=color:#f92672>&#34;instances&#34;</span>: [
        {
          <span style=color:#f92672>&#34;schema_version&#34;</span>: <span style=color:#ae81ff>0</span>,
          <span style=color:#f92672>&#34;attributes&#34;</span>: {
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#f92672>&#34;results&#34;</span>: [
              {
                <span style=color:#960050;background-color:#1e0010>.</span>
                <span style=color:#960050;background-color:#1e0010>.</span>
                <span style=color:#960050;background-color:#1e0010>.</span>
                <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
                <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;IaC_User_{{ pod }}&#34;</span>,
                <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;organization.Organization&#34;</span>,
              }
            ],
          },
          <span style=color:#f92672>&#34;sensitive_attributes&#34;</span>: []
        }
      ]
    },
    {
      <span style=color:#f92672>&#34;mode&#34;</span>: <span style=color:#e6db74>&#34;managed&#34;</span>,
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;intersight_ntp_policy&#34;</span>,
      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;east&#34;</span>,
      <span style=color:#f92672>&#34;provider&#34;</span>: <span style=color:#e6db74>&#34;provider[\&#34;registry.terraform.io/ciscodevnet/intersight\&#34;]&#34;</span>,
      <span style=color:#f92672>&#34;instances&#34;</span>: [
        {
          <span style=color:#f92672>&#34;schema_version&#34;</span>: <span style=color:#ae81ff>0</span>,
          <span style=color:#f92672>&#34;attributes&#34;</span>: {
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
            <span style=color:#f92672>&#34;mod_time&#34;</span>: <span style=color:#e6db74>&#34;2021-09-24 14:31:40.342 +0000 UTC&#34;</span>,
            <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
            <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;east_coast&#34;</span>,
            <span style=color:#f92672>&#34;ntp_servers&#34;</span>: [
              <span style=color:#e6db74>&#34;ntp.esl.cisco.com&#34;</span>,
              <span style=color:#e6db74>&#34;time-a-g.nist.gov&#34;</span>,
              <span style=color:#e6db74>&#34;time-b-g.nist.gov&#34;</span>
            ],
            <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;ntp.Policy&#34;</span>,
            <span style=color:#f92672>&#34;organization&#34;</span>: [
              {
                <span style=color:#f92672>&#34;additional_properties&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
                <span style=color:#f92672>&#34;class_id&#34;</span>: <span style=color:#e6db74>&#34;mo.MoRef&#34;</span>,
                <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
                <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;organization.Organization&#34;</span>,
                <span style=color:#f92672>&#34;selector&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>
              }
            ],
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#f92672>&#34;timezone&#34;</span>: <span style=color:#e6db74>&#34;Pacific/Niue&#34;</span>,
            <span style=color:#f92672>&#34;version_context&#34;</span>: []
          },
          <span style=color:#f92672>&#34;sensitive_attributes&#34;</span>: [],
          <span style=color:#f92672>&#34;private&#34;</span>: <span style=color:#e6db74>&#34;bnVsbA==&#34;</span>,
          <span style=color:#f92672>&#34;dependencies&#34;</span>: [
            <span style=color:#e6db74>&#34;data.intersight_organization_organization.iac&#34;</span>
          ]
        }
      ]
    }
  ]
}
</code></pre></div><p>As described this state file above is simply a JSON file following a Terraform specific schema. The state schema includes top-level metadata information such as
<code class=disable-clipboard>terraform_version</code>,
<code class=disable-clipboard>version</code> (state version), etc. Below this top-level metadata you will find
<code class=disable-clipboard>outputs</code> followed by
<code class=disable-clipboard>resources</code>.</p>
<h3 id=resources-in-state>Resources in State</h3>
<p>In the state output above, you&rsquo;ll notice there is a root property named
<code class=disable-clipboard>resources</code> which contains an array of resource objects. Key properties to note at the start of each resource object are
<code class=disable-clipboard>mode</code>,
<code class=disable-clipboard>type</code>, and
<code class=disable-clipboard>provider</code>.</p>
<h4 id=data-sources>Data Sources</h4>
<p>The first resource entry in the state output above contains the following:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;mode&#34;</span>: <span style=color:#e6db74>&#34;data&#34;</span>,
    <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;intersight_organization_organization&#34;</span>,
    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;iac&#34;</span>,
    <span style=color:#f92672>&#34;provider&#34;</span>: <span style=color:#e6db74>&#34;provider[\&#34;registry.terraform.io/ciscodevnet/intersight\&#34;]&#34;</span>,
    <span style=color:#f92672>&#34;instances&#34;</span>: [
    {
        <span style=color:#f92672>&#34;schema_version&#34;</span>: <span style=color:#ae81ff>0</span>,
        <span style=color:#f92672>&#34;attributes&#34;</span>: {
          <span style=color:#960050;background-color:#1e0010>.</span>
          <span style=color:#960050;background-color:#1e0010>.</span>
          <span style=color:#960050;background-color:#1e0010>.</span>
          <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
          <span style=color:#960050;background-color:#1e0010>.</span>
          <span style=color:#960050;background-color:#1e0010>.</span>
          <span style=color:#960050;background-color:#1e0010>.</span>
          <span style=color:#f92672>&#34;results&#34;</span>: [
            {
              <span style=color:#960050;background-color:#1e0010>.</span>
              <span style=color:#960050;background-color:#1e0010>.</span>
              <span style=color:#960050;background-color:#1e0010>.</span>
              <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
              <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;IaC_User_{{ pod }}&#34;</span>,
              <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;organization.Organization&#34;</span>,
            }
          ],
        },
        <span style=color:#f92672>&#34;sensitive_attributes&#34;</span>: []
    }
    ]
}<span style=color:#960050;background-color:#1e0010>,</span>
</code></pre></div><p>Breaking this down we know:</p>
<ul>
<li>
<code class=disable-clipboard>mode</code> - is <strong>data</strong> meaning this is a <strong>data source</strong></li>
<li>
<code class=disable-clipboard>type</code> - is of resource type
<a href=https://registry.terraform.io/providers/CiscoDevNet/intersight/latest/docs/data-sources/organization_organization target=_blank>intersight_organization_organization</a></li>
<li>
<code class=disable-clipboard>provider</code> - is using the
<a href=https://registry.terraform.io/providers/CiscoDevNet/intersight/latest target=_blank>Cisco Intersight</a> provider</li>
</ul>
<p>The
<code class=disable-clipboard>instances -> attributes</code> property contains the returned data fetched from the <strong>data source</strong>. Each resource regardless of type is always written to state with a unique identifier found in the
<code class=disable-clipboard>id</code> property of
<code class=disable-clipboard>instances -> attributes</code>. The format of the instance attributes are <strong>provider specific</strong> and should be well documented within the Terraform registry for that provider -> resource type. In the case of the
<code class=disable-clipboard>intersight_organization_organization</code> resource type, all fetched fetched items are stored in an attribute property called
<code class=disable-clipboard>results</code>.</p>
<p>This entry was written into state because of the following configuration code block:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=color:#66d9ef>data</span> <span style=color:#e6db74>&#34;intersight_organization_organization&#34;</span> <span style=color:#e6db74>&#34;iac&#34;</span> {
    <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;IaC_User_{{ pod }}&#34;</span>
}
</code></pre></div><p>This code block tells the Cisco Intersight provider to fetch the details of an Organization with the name
<code class=disable-clipboard>IaC_User_<span class=pod></span></code>. Because the Intersight API always returns a list of results when looking an object up by a <strong>property</strong> rather than a <strong>Moid</strong> (Managed object identifier), the matching organization is stored in the
<code class=disable-clipboard>results</code> property in the form of a list (array).</p>
<p>The first entry in
<code class=disable-clipboard>instances -> attributes -> results</code> contains the target organization we want to source data from. Some of the attributes of this result entry have been omitted for readability but the most relevant data point we are after is the
<code class=disable-clipboard>moid</code>.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#e6db74>&#34;results&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> [
  {
    <span style=color:#960050;background-color:#1e0010>.</span>
    <span style=color:#960050;background-color:#1e0010>.</span>
    <span style=color:#960050;background-color:#1e0010>.</span>
    <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;IaC_User_2&#34;</span>,
    <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;organization.Organization&#34;</span>,
  }
]<span style=color:#960050;background-color:#1e0010>,</span>
</code></pre></div><h4 id=referencing-data-source-attributes>Referencing Data Source Attributes</h4>
<p>In previous code snippets we have seen how the <code>moid</code> attribute can be referenced in other configuration blocks. Let&rsquo;s look again at the
<code class=disable-clipboard>intersight_ntp_policy</code> code below:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;intersight_ntp_policy&#34;</span> <span style=color:#e6db74>&#34;east&#34;</span> {
  <span style=color:#a6e22e>name</span>        = <span style=color:#e6db74>&#34;east_coast&#34;</span>
  <span style=color:#a6e22e>description</span> = <span style=color:#e6db74>&#34;IaC lab NTP policy for east coast&#34;</span>
  <span style=color:#a6e22e>enabled</span>     = <span style=color:#66d9ef>true</span>
  <span style=color:#a6e22e>ntp_servers</span> = [
    <span style=color:#e6db74>&#34;ntp.esl.cisco.com&#34;</span>,
    <span style=color:#e6db74>&#34;time-a-g.nist.gov&#34;</span>,
    <span style=color:#e6db74>&#34;time-b-g.nist.gov&#34;</span>
  ]
  <span style=color:#a6e22e>organization</span> {
    <span style=color:#a6e22e>object_type</span> = <span style=color:#e6db74>&#34;organization.Organization&#34;</span>
    <span style=color:#a6e22e>moid</span>        = data.<span style=color:#a6e22e>intersight_organization_organization</span>.<span style=color:#a6e22e>iac</span>.<span style=color:#a6e22e>results</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>moid</span>
  }
}
</code></pre></div><p>When referencing a data source attribute you must always prefix the resource type with
<code class=disable-clipboard>data</code>. From there you simply follow the syntax found in state (which should also be well documented in the provider documentation). Generically the format is:</p>
<p>
<code class=disable-clipboard>data</code>.
<code class=disable-clipboard>&lt;resource type></code>.
<code class=disable-clipboard>&lt;name></code>.
<code class=disable-clipboard>&lt;attribute path></code></p>
<p>In this specific example that equates to:</p>
<p>
<code class=disable-clipboard>data</code>.
<code class=disable-clipboard>intersight_organization_organization</code>.
<code class=disable-clipboard>iac</code>.
<code class=disable-clipboard>results[0].moid</code></p>
<h4 id=resources>Resources</h4>
<p><strong>Managed resources</strong> are always listed after data sources in the state file and are formatted almost identically to a data source with the main exception being the <strong>mode</strong> attribute is
<code class=disable-clipboard>managed</code> instead of
<code class=disable-clipboard>data</code>. The resource block shown in the last code snippet above looks like this in the state file:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;mode&#34;</span>: <span style=color:#e6db74>&#34;managed&#34;</span>,
  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;intersight_ntp_policy&#34;</span>,
  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;east&#34;</span>,
  <span style=color:#f92672>&#34;provider&#34;</span>: <span style=color:#e6db74>&#34;provider[\&#34;registry.terraform.io/ciscodevnet/intersight\&#34;]&#34;</span>,
  <span style=color:#f92672>&#34;instances&#34;</span>: [
    {
      <span style=color:#f92672>&#34;schema_version&#34;</span>: <span style=color:#ae81ff>0</span>,
      <span style=color:#f92672>&#34;attributes&#34;</span>: {
        <span style=color:#960050;background-color:#1e0010>.</span>
        <span style=color:#960050;background-color:#1e0010>.</span>
        <span style=color:#960050;background-color:#1e0010>.</span>
        <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
        <span style=color:#f92672>&#34;mod_time&#34;</span>: <span style=color:#e6db74>&#34;2021-09-24 14:31:40.342 +0000 UTC&#34;</span>,
        <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
        <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;east_coast&#34;</span>,
        <span style=color:#f92672>&#34;ntp_servers&#34;</span>: [
          <span style=color:#e6db74>&#34;ntp.esl.cisco.com&#34;</span>,
          <span style=color:#e6db74>&#34;time-a-g.nist.gov&#34;</span>,
          <span style=color:#e6db74>&#34;time-b-g.nist.gov&#34;</span>
        ],
        <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;ntp.Policy&#34;</span>,
        <span style=color:#f92672>&#34;organization&#34;</span>: [
          {
            <span style=color:#f92672>&#34;additional_properties&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
            <span style=color:#f92672>&#34;class_id&#34;</span>: <span style=color:#e6db74>&#34;mo.MoRef&#34;</span>,
            <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
            <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;organization.Organization&#34;</span>,
            <span style=color:#f92672>&#34;selector&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>
          }
        ],
        <span style=color:#960050;background-color:#1e0010>.</span>
        <span style=color:#960050;background-color:#1e0010>.</span>
        <span style=color:#960050;background-color:#1e0010>.</span>
        <span style=color:#f92672>&#34;timezone&#34;</span>: <span style=color:#e6db74>&#34;Pacific/Niue&#34;</span>,
        <span style=color:#f92672>&#34;version_context&#34;</span>: []
      },
      <span style=color:#f92672>&#34;sensitive_attributes&#34;</span>: [],
      <span style=color:#f92672>&#34;private&#34;</span>: <span style=color:#e6db74>&#34;bnVsbA==&#34;</span>,
      <span style=color:#f92672>&#34;dependencies&#34;</span>: [
        <span style=color:#e6db74>&#34;data.intersight_organization_organization.iac&#34;</span>
      ]
    }
  ]
}
</code></pre></div><p>Just like with data sources, the format of
<code class=disable-clipboard>instances -> attributes</code> is provider specific for the given resource type. In this case, the Cisco Intersight provider formats the attributes of a <strong>managed resource</strong> slightly differently than a data source. Notice that there is no
<code class=disable-clipboard>results</code> attribute in the state output above compared to the data source state entry. This is because the Intersight API does not return a list of results for created objects (POST), only for fetched objects (GET). Cisco chose to preserve that format when writing resources to state with the Intersight provider.</p>
<h4 id=referencing-resource-attributes>Referencing Resource Attributes</h4>
<p>Referencing a managed resource attribute is done almost identically to how a data source attribute is reference with one minor exception, you don&rsquo;t need the
<code class=disable-clipboard>data</code> prefix. Therefore, the generic syntax would be:</p>
<p>
<code class=disable-clipboard>&lt;resource type></code>.
<code class=disable-clipboard>&lt;name></code>.
<code class=disable-clipboard>&lt;attribute path></code></p>
<p>We will see an example of referencing attributes from this managed resource in the following section.</p>
<h3 id=outputs-in-state>Outputs in State</h3>
<p><strong>Output values</strong> contain the values you want externally exposed or easily read from the state file. This is why the Terraform state schema always puts these values near the top above
<code class=disable-clipboard>resources</code>. Unlike resources,
<code class=disable-clipboard>outputs</code> is a JSON object of key/value pairs where each <strong>key</strong> is the output <em>name</em> and the <strong>value</strong> contains another JSON object with the output value <em>type</em> and actual <em>value</em>. Notice that for outputs, the Terraform language automatically determines the type and does not require an explicit type definition. Let&rsquo;s now look at how the output configuration block was written to state:</p>
<p><strong>Configuration:</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=color:#66d9ef>output</span> <span style=color:#e6db74>&#34;ntp_east_moid&#34;</span> {
    <span style=color:#a6e22e>value</span> = <span style=color:#a6e22e>intersight_ntp_policy</span>.<span style=color:#a6e22e>east</span>.<span style=color:#a6e22e>moid</span>
}
</code></pre></div><p><strong>State:</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#e6db74>&#34;outputs&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
    <span style=color:#f92672>&#34;ntp_east_moid&#34;</span>: {
        <span style=color:#f92672>&#34;value&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
    }
}<span style=color:#960050;background-color:#1e0010>,</span>
</code></pre></div><p>In the state file you can see that Terraform has retrieved the value of the
<code class=disable-clipboard>intersight_ntp_policy</code>.
<code class=disable-clipboard>east</code>.
<code class=disable-clipboard>moid</code> managed resource attribute shown in the previous section and has also determined that the <strong>type</strong> of this value is
<code class=disable-clipboard>string</code></p>
<h3 id=execution-order>Execution Order</h3>
<p>As discussed in the <a href=/iac-workshop-intersight/terraform_primer/configuration_files/#dependency-mapping>
Terraform Primer > Configuration Blocks
</a> section, execution order is based upon the dependency mapping order determined during state modelling. This dependency mapping is documented in the state file for <strong>resources</strong> so that it knows the proper execution order for future resource modification operations.</p>
<p>Reviewing again the full state file we have:</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">67
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">68
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">69
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">70
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">71
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">72
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">73
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">74
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">75
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">76
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">77
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">78
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">79
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">80
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">81
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">82
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">83
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">84
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">85
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">86
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">87
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">88
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">89
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">90
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#ae81ff>4</span>,
  <span style=color:#f92672>&#34;terraform_version&#34;</span>: <span style=color:#e6db74>&#34;1.0.6&#34;</span>,
  <span style=color:#f92672>&#34;serial&#34;</span>: <span style=color:#ae81ff>2</span>,
  <span style=color:#f92672>&#34;lineage&#34;</span>: <span style=color:#e6db74>&#34;e98beb19-8d41-e8d1-36b2-26aedcb09c90&#34;</span>,
  <span style=color:#f92672>&#34;outputs&#34;</span>: {
    <span style=color:#f92672>&#34;ntp_east_moid&#34;</span>: {
      <span style=color:#f92672>&#34;value&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
    }
  },
  <span style=color:#f92672>&#34;resources&#34;</span>: [
    {
      <span style=color:#f92672>&#34;mode&#34;</span>: <span style=color:#e6db74>&#34;data&#34;</span>,
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;intersight_organization_organization&#34;</span>,
      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;iac&#34;</span>,
      <span style=color:#f92672>&#34;provider&#34;</span>: <span style=color:#e6db74>&#34;provider[\&#34;registry.terraform.io/ciscodevnet/intersight\&#34;]&#34;</span>,
      <span style=color:#f92672>&#34;instances&#34;</span>: [
        {
          <span style=color:#f92672>&#34;schema_version&#34;</span>: <span style=color:#ae81ff>0</span>,
          <span style=color:#f92672>&#34;attributes&#34;</span>: {
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#f92672>&#34;results&#34;</span>: [
              {
                <span style=color:#960050;background-color:#1e0010>.</span>
                <span style=color:#960050;background-color:#1e0010>.</span>
                <span style=color:#960050;background-color:#1e0010>.</span>
                <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
                <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;IaC_User_{{ pod }}&#34;</span>,
                <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;organization.Organization&#34;</span>,
              }
            ],
          },
          <span style=color:#f92672>&#34;sensitive_attributes&#34;</span>: []
        }
      ]
    },
    {
      <span style=color:#f92672>&#34;mode&#34;</span>: <span style=color:#e6db74>&#34;managed&#34;</span>,
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;intersight_ntp_policy&#34;</span>,
      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;east&#34;</span>,
      <span style=color:#f92672>&#34;provider&#34;</span>: <span style=color:#e6db74>&#34;provider[\&#34;registry.terraform.io/ciscodevnet/intersight\&#34;]&#34;</span>,
      <span style=color:#f92672>&#34;instances&#34;</span>: [
        {
          <span style=color:#f92672>&#34;schema_version&#34;</span>: <span style=color:#ae81ff>0</span>,
          <span style=color:#f92672>&#34;attributes&#34;</span>: {
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
            <span style=color:#f92672>&#34;mod_time&#34;</span>: <span style=color:#e6db74>&#34;2021-09-24 14:31:40.342 +0000 UTC&#34;</span>,
            <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;614de14c6275722d3054c65c&#34;</span>,
            <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;east_coast&#34;</span>,
            <span style=color:#f92672>&#34;ntp_servers&#34;</span>: [
              <span style=color:#e6db74>&#34;ntp.esl.cisco.com&#34;</span>,
              <span style=color:#e6db74>&#34;time-a-g.nist.gov&#34;</span>,
              <span style=color:#e6db74>&#34;time-b-g.nist.gov&#34;</span>
            ],
            <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;ntp.Policy&#34;</span>,
            <span style=color:#f92672>&#34;organization&#34;</span>: [
              {
                <span style=color:#f92672>&#34;additional_properties&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
                <span style=color:#f92672>&#34;class_id&#34;</span>: <span style=color:#e6db74>&#34;mo.MoRef&#34;</span>,
                <span style=color:#f92672>&#34;moid&#34;</span>: <span style=color:#e6db74>&#34;6138396d6972652d3029a3bc&#34;</span>,
                <span style=color:#f92672>&#34;object_type&#34;</span>: <span style=color:#e6db74>&#34;organization.Organization&#34;</span>,
                <span style=color:#f92672>&#34;selector&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>
              }
            ],
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#960050;background-color:#1e0010>.</span>
            <span style=color:#f92672>&#34;timezone&#34;</span>: <span style=color:#e6db74>&#34;Pacific/Niue&#34;</span>,
            <span style=color:#f92672>&#34;version_context&#34;</span>: []
          },
          <span style=color:#f92672>&#34;sensitive_attributes&#34;</span>: [],
          <span style=color:#f92672>&#34;private&#34;</span>: <span style=color:#e6db74>&#34;bnVsbA==&#34;</span>,
          <span style=color:#f92672>&#34;dependencies&#34;</span>: [
            <span style=color:#e6db74>&#34;data.intersight_organization_organization.iac&#34;</span>
          ]
        }
      ]
    }
  ]
}</code></pre></td></tr></table>
</div>
</div>
<p>On line <strong>84</strong> of the state file you can see Terraform has documented that the
<code class=disable-clipboard>intersight_ntp_policy.east</code> managed resource has a dependency on the
<code class=disable-clipboard>data.intersight_organization_organization.iac</code> data source. Now when creating, updating, or deleting this configuration Terraform knows the proper order of operations.</p>
<p>Dependency data is not stored for <strong>output values</strong> because they are always evaluated last. If you have a need for variables that can reference resource attributes, take a look at
<a href=https://www.terraform.io/docs/language/values/locals.html target=_blank>Local Values</a></p>
<h2 id=moving-forward>Moving Forward</h2>
<p>Now that you know how to properly write configuration code and read it in state, let&rsquo;s look at how to perform lifecycle actions using the Terraform CLI.</p>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/iac-workshop-intersight/terraform_primer/configuration_files/ title="Configuration Blocks"> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/iac-workshop-intersight/terraform_primer/actions/ title=Actions style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/iac-workshop-intersight/js/clipboard.min.js?1633318973></script>
<script src=/iac-workshop-intersight/js/perfect-scrollbar.min.js?1633318973></script>
<script src=/iac-workshop-intersight/js/perfect-scrollbar.jquery.min.js?1633318973></script>
<script src=/iac-workshop-intersight/js/jquery.sticky.js?1633318973></script>
<script src=/iac-workshop-intersight/js/featherlight.min.js?1633318973></script>
<script src=/iac-workshop-intersight/js/highlight.pack.js?1633318973></script>
<script>hljs.highlightAll()</script>
<script src=/iac-workshop-intersight/js/modernizr.custom-3.6.0.js?1633318973></script>
<script src=/iac-workshop-intersight/js/learn.js?1633318973></script>
<script src=/iac-workshop-intersight/js/hugo-learn.js?1633318973></script>
<script type=text/javascript src=/iac-workshop-intersight/js/terraform.js?1633318973></script>
<script type=text/javascript>hljs.registerLanguage('terraform',window.hljsDefineTerraform),hljs.highlightAll(),hljs.configure({ignoreUnescapedHTML:!0})</script>
<script type=text/javascript src=/iac-workshop-intersight/js/user_navigation.js?1633318973></script>
</body>
</html>